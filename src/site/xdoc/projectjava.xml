<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2005 The Apache Software Foundation or its licensors, as applicable.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 -->
 <document url="projectjava">
         <properties>
                <title>Apache Tuscany - Setting up Tuscany Java Project </title>
        </properties>
        <body>
<section name="Tuscany JAVA Project">
<p>
        <ol>

                <li><a href="#System requirements">System requirements</a></li>
                <li><a href="#checkout and build tuscany">Checkout and build Tuscany Java project</a></li>
                <li><a href="#run samples">Running  samples</a></li>
                <li> <script type="text/javascript">linkNewWindow('patches.html','Create and submit a patch');</script></li>
        <li> <script type="text/javascript">linkNewWindow('javadocinfo.html','javadoc');</script></li>
        <li> <script type="text/javascript">linkNewWindow('codeguidelines.html','Java Coding Guidelines');</script></li>
                <li><a href="#using eclipse">Using Eclipse for IDE</a></li>
                <li><a href="#using idea">Using IDEA style templates</a></li>
        </ol>
</p>
</section>

<a name="System requirements"></a>
<section name="System requirements">
                <p>             
                        Next, please download the following in order to get your machine ready for Java development.
                        <br></br>
                <table style="text-align: left; width: 100%;" border="1"
                                cellpadding="2" cellspacing="2">
                                <tbody>
                                        <tr> <!-- heading -->
                                                <td><b>Software</b></td>
                                                <td><b>Download Link</b></td>
                                <td><b>Download Instructions</b></td>
                                        </tr>
                                        <tr>
                                        <td>JDK 5.0 Update 6 or later</td>
                                        <td>
                                        <script type="text/javascript">linkNewWindow('http://java.sun.com/j2se/1.5.0/download.jsp','jdk 5.0');</script>
                                </td>
                                <td>Steps for Java setup is  <a href="#setup JDK 5.0">here</a>. </td>
                                </tr>
                                <tr> <!--mvn -->
                                        <td> Apache Maven 2.0.4 or later</td>
                                        <td><script type="text/javascript">linkNewWindow('http://maven.apache.org/download.html','Maven 2.04');</script> </td>
                                        <td> 
                                                <ul>
                                                <li>
                                                We are using Maven 2 to build Tuscany, plus a few Ant scripts. Steps for Maven setup is <a href="#setup maven">here</a>.
                                                </li>
                                                <li>
                                                A quick reference on Maven is available <script type="text/javascript">linkNewWindow('mavan.html','here');</script>
                                                </li>
                                                </ul>
                                        </td>
                                </tr>
                                <tr> <!--ant -->        
                                        <td> Apache Ant 1.6.5 or later</td>
                                        <td><script type="text/javascript">linkNewWindow('http://ant.apache.org/bindownload.cgi','Ant');</script> </td>
                                        <td> Steps for Ant setup is <a href="#setup ant">here</a>. </td> 
                                </tr>
                                <tr> <!--svn -->
                                        <td>Subversion 1.3.0 or later </td>
                                        <td> <script type="text/javascript">linkNewWindow('http://subversion.tigris.org/project_packages.html','Subversion');</script></td>
                                        <td> 
                                        <ul>
                                                <li>Tuscany source code is stored in a Subversion (SVN) repository, you need Subversion to download it. Steps for svn setup is <a href="#setup subversion">here</a>. </li>
                                                <li> A quick reference for subversion commands is <script type="text/javascript">linkNewWindow('quicksubversion.html','here');</script></li>
                                        </ul>
                                        </td>
                                </tr>
                                <tr><!--tomcat --> 
                                <td> Apache Tomcat 5.5.16 </td>
                                <td>
                        <script type="text/javascript">linkNewWindow('http://tomcat.apache.org/','apache tomcat 5.5');</script>
                                </td>
                                <td>
                                This is the Web container that we integrate with, to allow you to use the SCA programming 
                                model in Web applications. 
                                Steps for Tomcat setup is <a href="#setup tomcat">here</a>.
                                </td>
                                </tr>
                                </tbody>
                        </table>
                        <br></br>
                        
</p>
</section><!-- system requirement for development -->


<section name="Creating a tuscany directory">
Open a Command Prompt window, then from the command prompt create a directory named "tuscany": 
This is the directory where we're going to check out the Tuscany code from subversion.
</section>
<section name="Enviroment scripts">
<p>There is a windows <a href='setenv.bat'>setenv.bat</a> and a linux  <a href='setenv.sh'>setenv.sh</a> script that you can
download by right clicking and "selecting save as..."  You can edit these scripts
 with the below described environment variables to set up your environment any time by running them. On linux you invoke the shell script with
 <pre>
 . ./setenv.sh
 </pre>
</p>
</section>
        <a name="setup JDK 5.0"></a>
<section name="Downloading and installing the Java JDK 5.0"> 
<ul>
        <li>
        Download and extract the appropriate JDK for your operating system from <script type="text/javascript">linkNewWindow('http://java.sun.com/j2se/1.5.0/download.jsp','http://java.sun.com/j2se/1.5.0/download.jsp');</script>.
        </li>
        <li>
         set the JAVA_HOME environment variable to point to the root directory of where you extracted java download.
        </li>
        <li>
         Add to your PATH environment variable to include the full path to the <b>bin</b> subdirectory of the JDK download package.
        </li>
</ul>
</section>

<a name="setup maven"></a>
<a name="setup maven"></a>
<section name ="Downloading and installing Apache Maven">
<ul>
        <li>
        Download and extract Maven 2.0.4 or later from  <script type="text/javascript">linkNewWindow('http://maven.apache.org/download.html','http://maven.apache.org/download.html');</script>.
        </li>
        <li>
         Add to your PATH environment variable to include the  the full path to the  <b>bin</b> subdirectory of the Maven  download package.
        </li>
</ul>
</section>
<a name="setup ant"></a>
<section name ="Downloading and installing Apache Ant">
<ul>
        <li>
        Download and extract Ant 1.6.5  or later from  <script type="text/javascript">linkNewWindow('http://ant.apache.org/bindownload.cgi','http://ant.apache.org/bindownload.cgi');</script>.
        </li>
        <li>
         Add to your PATH environment variable to include the  the full path to the <b>bin</b> subdirectory of the Ant download.
        </li>
</ul>
</section>
<a name="setup subversion"></a>
<section name ="Downloading and installing Subversion">
<ul>
        <li>
        Download and extract Subversion 1.3.1 or later from  <script type="text/javascript">linkNewWindow('http://subversion.tigris.org/project_packages.html','http://subversion.tigris.org/project_packages.html');</script>.
        </li>
        <li>
        Modify your path statement to include  the full path to the subversion <b>bin</b> directory. 
        </li>
        <p><i>Note: For linux you may need to install subversion  as root </i></p>
</ul>
<p> A quick reference for subversion commands is <script type="text/javascript">linkNewWindow('quicksubversion.html','here');</script></p>
</section>

<a name="setup tomcat"></a>
<section name ="Download and Setup Tomcat">
        <ul>
        <li>
        Dowload apache-tomcat-5.5.17  <script type="text/javascript">linkNewWindow('http://www.ibiblio.org/pub/mirrors/apache/tomcat/tomcat-5/v5.5.16/bin/apache-tomcat-5.5.16.zip','Tomcat Zip');</script> here. 
        to the <B>tuscany\java\distribution\tomcat-overlay directory</B>. Do not unpack.
        </li>
        </ul>
</section>

<a name="checkout and build tuscany"></a>
<section name ="Checkout and Build Tuscany">
        <p>
                <b>Check out Tuscany Java</b>
        </p>
        <p>     
        From the command prompt, in the <B>tuscany</B> directory do the following: 
        <br></br>
        <code>
        svn co http://svn.apache.org/repos/asf/incubator/tuscany/java
        </code>
        <br></br>
        This should check out all the source code from the Tuscany SVN repository into java sub directory. 
</p>
<p>
</p>
<p>
        <b> Build Tuscany Java </b>
</p>
<p>
        When the check out completes change to the <b>java</b> subdirectory.
        From the command prompt do the following build tuscany using maven:
        <pre>
        mvn 
        </pre>
This will build the Tuscany runtime with Maven. Maven will download all the JAR dependencies, build all the Tuscany sub-projects and run the unit tests. 
</p>
</section>
<a name="run samples"></a>
<section name ="Running The Samples">
        <p>Run the samples by building the distribution.</p>
         <ul>
         <li>
          Change the directory to the tuscany\java\distribution
         </li>
         <li>
          Issue mvn to build the distribution package.
         </li>
         <li>
          Change the directory tuscany\java\distribution\target\tuscany-dist
         </li>
         <li>
          Follow the directions in GettingStarted.htm
         </li>
         </ul>
           
</section>
<a name="using eclipse"></a>
<section name="Using Eclipse (optional)">
                        <p>
                                <span style="font-size: 10pt;">
                                        Link to Eclipse download :
                                        <span>
                                                <a
                                                        href="http://www.eclipse.org/downloads/index.php">
                                                        http://www.eclipse.org/downloads/index.php
                                                </a>
                                        </span>
                                </span>
                        </p>
                        <p>
                                Getting Started documentation:
                                                <a href="http://www.eclipse.org/downloads/index.php">
                                                        http://www.eclipse.org/downloads/index.php
                                                </a>
                        </p>
                        <p>
                                To create the eclipse projects to use for SCA development:
                        </p>
                        <p>
                                1) When checking code out from subversion, checkout the
                                        subversion trunk to a location outside your eclipse
                                        workspace (it has to be outside because Eclipse will
                                        not allow you to import projects from a location
                                        overlapping with your workspace)
                        </p>
                        <p style="margin-left: 0.5in; text-indent: -0.25in;"><!--[if !supportLists]-->
                                2) Go to Import / Existing projects into workspace.
                                        <span style="" />
                                        Select either the runtime, spec, tools or samples
                                        directory.
                                        <span style="" />
                                        The wizard proposes the list of Eclipse projects
                                        under that directory. Importing the projects does
                                        not copy the files; it just makes the files at that
                                        location visible under an Eclipse project.
                        </p>
                        <p>
                                3) If you need to use Eclipse to edit files outside of
                                        these projects (for example the etc directory, or
                                        the maven files at the root of the trunk), then
                                        delete the Eclipse projects, with the option to not
                                        delete the files, and import the whole trunk as a
                                        project.
                        </p>
                </section>
                <section name="Using Eclipse style templates">
                 If you are using Eclipse, Tuscany has a preferred Java coding style. Please use the 
                   <a href='http://svn.apache.org/repos/asf/incubator/tuscany/java/etc/tuscany-eclipse-codestyle.xml'>tuscany-eclipse-codestyle.xml</a> in Eclipse.
                <br/>Download this file. <i>You may need to right click and save.</i> 
                Then in Eclipse:<br/>
                <pre>
                Window->Preferences-&gt;Java-&gt;Code-Style-&gt;Formatter-&gt;Import...
                <i>(Specify path and file to the tuscany-eclipse-codestyle.xml just downloaded. </i>
                </pre>
                </section>
                <section name="Using Subclipse (optional)">
                        <p>
                                Install the Subversion Eclipse Plugin as described here:
                                <a href="http://subclipse.tigris.org/">http://subclipse.tigris.org/
                                </a>
                        </p>
                        <ol>
                                <li>
                                Open the SVN Repository Exploring perspective
                                </li>
                        
                                <li>
                                Right click in the SVN Repository view.
                                
                                </li>
                                <li>Select "New" and "Repository Location" 
                                
                                </li>
                                <li>
                                Url:
                                        <a href="http://svn.apache.org/repos/asf/incubator/tuscany">
                                        http://svn.apache.org/repos/asf/incubator/tuscany
                                </a>
                                        <p>
                                                Use URL https://svn.apache.org/repos/asf/incubator/tuscany if you
                                                have committer rights and need to commit changes back to the repository.
                                        </p>
                                </li>
                                <li>
                                        Select the "Finish" button and allow Subeclipse time to access the repository and
                                        display its contents in the SVN Repository explorer.  Once the repository is displayed
                                        in the explorer, you will see a number of subfolders displayed.  The ones that are
                                        relevant are "java", "cpp" and "site" - which contain the Tuscany Java runtime, the
                                        Tuscany C++ runtime and the Tuscany website material respectively.
                                </li>
                                <li>
                                        Select the folder you want to check out as a project - one of java, cpp or site for example
                                        Right click, select "Checkout" and "Checkout using new project wizard" - select the appropriate
                                        options for your needs and then click "Finish"
                                </li>
                        </ol>
                        <p>
                                You can check in changes using the "Commit" item in the team submenu of the Java perspective.
                        </p>
                </section>
<a name="using idea"></a>
                <section name="Using IDEA style templates">
                 If you are using IDEA IDE, Tuscany has a preferred Java coding style. Please use the 
                   <a href='http://svn.apache.org/repos/asf/incubator/tuscany/java/etc/tuscany-idea-codestyle.xml'>tuscany-idea-codestyle.xml</a> in IDEA 
                <br/>Download this file. <i>You may need to right click and save.</i> 
                        <pre>
                        copy tuscany-idea-codestyle.xml to ~/.IntelliJIdea50/config/codestyles
                        File->Settings, Project Code Styles, Import
                        </pre>
                </section>
        </body>
</document>
