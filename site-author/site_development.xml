<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2005 The Apache Software Foundation or its licensors, as applicable.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 -->
<document >

        <properties>
                <title>Site Development</title>
                <bannertitle>Site Development</bannertitle>
        </properties>   
        
        <body>

        <section name="Editing this site" >
<p>
The website is generated by <a href="http://jakarta.apache.org/velocity/docs/anakia.html">Anakia.</a>
</p>
<p>
The source can be checked out from the <a href="https://svn.apache.org/repos/asf/incubator/tuscany/site/">
Tuscany SVN repository</a>.<br/>
The source documents are in the "site-author" directory.
The documents to publish are in the "site-publish" directory.</p>

<hr/>
<p><strong>Quick Start</strong><br/></p>

<p>If you just want to patch the website a little:
<ol>
  <li> Edit/add files in the site-author/ directory (copy-pasting from existing
     files is often a good idea)</li>
  <li>Install a java runtime environment or development kit</li>
  <li>Type <i>'./build.sh'</i> on linux/mac/solaris/unix or <i>'build.bat'</i> on windows</li>
 </ol>
 </p>
 <p>
You can now browse the site locally from the site-publish directory. Once you are
happy with your changes:
<ol>

  <li> Manually <i>'svn add'</i> any files generated in site-publish that weren't there
     before, or set the <i>'svn:ignore'</i> property to ignore them. Eg something like
     <pre>svn status site-publish | egrep '^\?' | sed -e 's/^\? *//g' | xargs svn add</pre>
     may work for you.<br/><br/></li>
  <li> Check the generated stuff looks like you want it to. Eg something like
     <pre>svn status site-publish | egrep '^(A|M)' | sed -e 's/^[AM] *//g' | xargs open</pre>may work for you.
     <br/><br/></li>
  <li> Commit.</li>
 </ol> </p>
 
<hr/>
<p><strong>Editing Images</strong></p>

<p>The programs you will need to edit all the files used on the site are:
<ul>
    <li> <a href='http://www.inkscape.org/'>Inkscape</a> - Open source vector graphics editor, 
    used for all of the diagrams and a few layout components.</li>
    <li> <a href="http://www.gimp.org/">The GIMP</a> - Open source bitmap graphics editor, used for most of the site layout components.</li>
</ul>

The original sources for most of the images are in the "image-sources" folder. You should be able to edit these files
and export them to the site-author folder so they will be copied over when the site is built ulsing the steps above.
</p>

<hr/>
<p><strong>Editing the Layout</strong></p>

<p>The layout of the site is defined in <i>'stylesheets/site.vsl'</i>. This file contains both HTML and
<a href="http://jakarta.apache.org/velocity/docs/vtl-reference-guide.html">VTL code</a>.<br/>
Much of the layout is also set in the CSS file located in <i>'site-author/css/style.css'</i>. <br/>
</p>
<p>To change the contents of the navigation menu, please edit <i>'stylesheets/project.xml'</i> </p>
<p>If you want to add more tabs to the layout across the top, they are defined in <i>'stylesheets/project.xml'</i>
as well. However, you must also add any new tabs to <i>'DropMenu.js'</i> in order for the menus to function properly.</p>

<hr/>
<p><strong>Publishing the site</strong></p>
<p>
The published version of the site lives in the site-publish directory in SVN.
To make this live, it must first be exported to a staging location on
people.apache.org and from there it will be replicated to the live servers.
This replication can take up to four hours so be patient.</p>
<p>
To update the site:
<ol>
    <li>log into people.apache.org</li>
    <li><pre>$ cd /www/incubator.apache.org/tuscany</pre></li>
    <li><pre>$ svn update</pre></li>
    <li>and wait ...</li>
</ol>
</p>


</section>

</body>
</document>
